<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TJA-Tatsujin</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="./style.css" />
</head>

<body class="flex flex-col bg-gray-50 min-h-screen font-sans text-gray-800 leading-relaxed">
  <header class="relative bg-red-500 shadow-md p-4 sm:p-5 rounded-b-3xl text-white text-center">
    <a href="https://github.com/KirisameVanilla/TJA-Tatsujin-Web" target="_blank" rel="noopener" data-i18n="githubTitle"
      title="查看项目源码"
      class="top-1/2 right-3 sm:right-5 absolute text-white text-xl sm:text-2xl hover:scale-110 transition-transform -translate-y-1/2 duration-100 transform">
      <i class="fab fa-github"></i>
    </a>
    <h1 data-i18n="headerTitle" class="m-0 text-2xl sm:text-3xl">TJA-Tatsujin</h1>
  </header>

  <main class="box-border flex-1 mx-auto my-4 p-4 sm:p-6 w-full max-w-3xl">
    <input id="search" data-i18n="searchPlaceholder" placeholder="输入搜索关键字" autocomplete="off"
      class="box-border focus:shadow-lg focus:shadow-red-100 p-2.5 sm:p-3 border-2 border-gray-300 focus:border-red-500 rounded-xl outline-none w-full text-base sm:text-lg transition-colors duration-100" />
    <div class="flex justify-center gap-4 mt-4">
      <button id="start" data-i18n="startDownload" disabled
        class="bg-red-500 hover:bg-red-600 disabled:bg-gray-400 px-5 sm:px-6 py-2.5 sm:py-3 border-0 rounded-xl text-white text-base sm:text-lg disabled:transform-none transition-all hover:-translate-y-0.5 duration-100 cursor-pointer disabled:cursor-not-allowed">开始下载</button>
      <button id="preview" data-i18n="previewBtn" disabled
        class="bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 px-5 sm:px-6 py-2.5 sm:py-3 border-0 rounded-xl text-white text-base sm:text-lg transition-all hover:-translate-y-0.5 duration-100 cursor-pointer disabled:cursor-not-allowed">预览</button>
    </div>
    <div class="bg-gray-100 mt-6 p-4 rounded-xl text-gray-600 text-sm break-words whitespace-pre-wrap status"
      id="status"></div>
    <ul id="results"
      class="bg-white shadow-lg mt-4 p-0 border border-gray-200 rounded-xl max-h-80 overflow-y-auto list-none"></ul>
  </main>

  <footer class="bg-gray-100 mt-auto p-5 border-gray-300 border-t text-gray-500 text-sm text-center">
    &copy; 2025 <a href="https://github.com/KirisameVanilla" target="_blank" rel="noopener"
      class="text-red-500 hover:underline no-underline">KirisameVanilla</a><br />
    <span data-i18n="footerText">非官方项目，仅供学习交流。</span>
  </footer>

  <!-- 浮动按钮组 -->
  <div class="right-5 md:right-8 bottom-5 md:bottom-8 z-50 floating-buttons fixed flex flex-col gap-4">
    <!-- Discord 社区按钮 -->
    <button id="discord-btn"
      class="flex justify-center items-center bg-indigo-600 hover:bg-indigo-700 shadow-lg hover:shadow-xl border-0 rounded-full w-12 md:w-15 h-12 md:h-15 text-white text-lg md:text-2xl hover:scale-110 active:scale-95 transition-all duration-300 cursor-pointer"
      data-i18n="discordCommunityBtn" title="Discord 社区">
      <i class="fab fa-discord"></i>
    </button>

    <!-- 设置按钮 -->
    <button id="settings-btn"
      class="flex justify-center items-center bg-red-500 hover:bg-red-600 shadow-lg hover:shadow-xl border-0 rounded-full w-12 md:w-15 h-12 md:h-15 text-white text-lg md:text-2xl hover:scale-110 active:scale-95 transition-all duration-300 cursor-pointer"
      title="设置">
      <i class="fas fa-cog"></i>
    </button>
  </div>

  <!-- 设置弹窗 -->
  <div id="settings-modal"
    class="hidden top-0 left-0 z-50 fixed justify-center items-center bg-transparent bg-opacity-100 backdrop-blur-sm w-full h-full modal">
    <div
      class="bg-white shadow-2xl rounded-xl w-[95%] sm:w-11/12 max-w-lg max-h-4/5 overflow-y-auto animate-fade-in modal-content">
      <div class="flex justify-between items-center p-4 sm:p-6 border-gray-200 border-b modal-header">
        <h3 data-i18n="apiConfigTitle" class="m-0 font-semibold text-red-500 text-xl">设置</h3>
        <span
          class="bg-transparent p-0 border-0 font-bold text-gray-400 hover:text-red-500 text-3xl leading-none transition-colors duration-300 cursor-pointer close">&times;</span>
      </div>
      <div class="p-4 sm:p-6 modal-body">
        <!-- 主题设置部分 -->
        <div class="mb-8 config-section">
          <div class="mb-4 section-header">
            <h4 data-i18n="themeSettings" class="m-0 text-gray-800 text-lg">主题设置</h4>
          </div>
          <div class="flex justify-between items-center bg-gray-50 p-4 border border-gray-200 rounded-lg">
            <div class="flex-1">
              <div class="flex items-center mb-1 font-medium text-gray-800">
                <i class="mr-2 fas fa-palette"></i>
                <span data-i18n="currentTheme">当前主题</span>
              </div>
              <div class="text-gray-600 text-sm">
                <span id="theme-status" data-i18n="lightTheme">浅色模式</span>
              </div>
            </div>
            <div class="flex gap-2 min-w-[200px]">
              <button id="theme-toggle"
                class="flex flex-1 items-center gap-2 bg-red-500 hover:bg-red-600 px-4 py-2 border-0 rounded-lg text-white text-sm whitespace-nowrap hover:scale-105 transition-all duration-200 cursor-pointer">
                <i class="fas fa-moon" id="theme-icon"></i>
                <span data-i18n="toggleTheme">切换主题</span>
              </button>
              <button id="theme-auto"
                class="flex items-center gap-2 bg-gray-500 hover:bg-gray-600 px-3 py-2 border-0 rounded-lg text-white text-sm whitespace-nowrap hover:scale-105 transition-all duration-200 cursor-pointer">
                <i class="fas fa-clock"></i>
                <span data-i18n="autoTheme">自动</span>
              </button>
            </div>
          </div>
        </div>

        <div class="mb-8 config-section">
          <div class="flex justify-between items-center mb-4 section-header">
            <h4 data-i18n="apiListTitle" class="m-0 text-gray-800 text-lg">API 配置列表</h4>
            <button id="add-api"
              class="flex justify-center items-center bg-red-500 hover:bg-red-600 border-0 rounded-full w-8 h-8 text-white hover:scale-110 transition-all duration-200 cursor-pointer add-btn"
              data-i18n="addApi" title="添加 API">
              <i class="fas fa-plus"></i>
            </button>
          </div>
          <div id="api-list" class="bg-gray-50 border border-gray-200 rounded-lg max-h-80 overflow-y-auto api-list">
            <!-- API 配置项将动态添加到这里 -->
          </div>
        </div>

        <!-- 添加/编辑 API 表单 -->
        <div id="api-form" class="hidden bg-gray-50 mt-4 p-6 border border-gray-200 rounded-lg api-form">
          <h4 id="api-form-title" data-i18n="addApiTitle" class="m-0 mb-4 text-gray-800">添加 API 配置</h4>
          <div class="flex flex-col mb-4 config-row">
            <label for="api-type" data-i18n="apiTypeLabel" class="mb-2 font-medium text-gray-800">API 类型:</label>
            <select id="api-type"
              class="p-2.5 sm:p-3 border-2 border-gray-300 focus:border-red-500 rounded-lg outline-none text-sm sm:text-base transition-colors duration-300">
              <option value="gitea">Gitea</option>
              <option value="github">GitHub</option>
              <option value="gitlab">GitLab</option>
            </select>
          </div>
          <div class="flex flex-col mb-4 config-row">
            <label for="api-name" data-i18n="apiNameLabel" class="mb-2 font-medium text-gray-800">配置名称:</label>
            <input id="api-name" type="text" data-i18n="apiNamePlaceholder" placeholder="例如: 主服务器"
              class="p-2.5 sm:p-3 border-2 border-gray-300 focus:border-red-500 rounded-lg outline-none text-sm sm:text-base transition-colors duration-300" />
          </div>
          <div class="flex flex-col mb-4 config-row">
            <label for="api-host" data-i18n="apiHostLabel" class="mb-2 font-medium text-gray-800">API 主机地址:</label>
            <input id="api-host" type="text" data-i18n="apiHostPlaceholder" placeholder="例如: xxx.xxx.xx"
              class="p-2.5 sm:p-3 border-2 border-gray-300 focus:border-red-500 rounded-lg outline-none text-sm sm:text-base transition-colors duration-300" />
          </div>
          <div class="flex flex-col mb-4 config-row">
            <label for="repo-owner" data-i18n="repoOwnerLabel" class="mb-2 font-medium text-gray-800">仓库所有者:</label>
            <input id="repo-owner" type="text" data-i18n="repoOwnerPlaceholder" placeholder="例如: xxx"
              class="p-2.5 sm:p-3 border-2 border-gray-300 focus:border-red-500 rounded-lg outline-none text-sm sm:text-base transition-colors duration-300" />
          </div>
          <div class="flex flex-col mb-4 config-row">
            <label for="repo-name" data-i18n="repoNameLabel" class="mb-2 font-medium text-gray-800">仓库名称:</label>
            <input id="repo-name" type="text" data-i18n="repoNamePlaceholder" placeholder="例如: xxx"
              class="p-2.5 sm:p-3 border-2 border-gray-300 focus:border-red-500 rounded-lg outline-none text-sm sm:text-base transition-colors duration-300" />
          </div>
          <div class="flex flex-col mb-4 config-row">
            <label class="inline-flex relative items-center gap-2 text-sm cursor-pointer switch-label">
              <input type="checkbox" id="api-use-proxy" class="sr-only" />
              <span class="relative bg-gray-400 rounded-full w-11 h-6 transition-all duration-100 slider">
                <span
                  class="top-0.5 left-0.5 absolute bg-white rounded-full w-4.5 h-4.5 transition-transform duration-100 slider-dot"></span>
              </span>
              <span data-i18n="apiUseProxy">使用加速代理</span>
            </label>
          </div>
          <div class="flex gap-4 mt-6 form-actions">
            <button id="save-api" data-i18n="saveApi"
              class="flex-1 bg-red-500 hover:bg-red-600 p-3 border-0 rounded-md text-white text-base transition-all duration-200 cursor-pointer">保存
              API</button>
            <button id="cancel-api" data-i18n="cancelApi"
              class="flex-1 bg-gray-500 hover:bg-gray-600 p-3 border-0 rounded-md text-white text-base transition-all duration-200 cursor-pointer">取消</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Discord 社区弹窗 -->
  <div id="discord-modal"
    class="hidden top-0 left-0 z-50 fixed justify-center items-center bg-transparent bg-opacity-100 backdrop-blur-sm w-full h-full modal">
    <div
      class="bg-white shadow-2xl rounded-xl w-[95%] sm:w-11/12 max-w-md max-h-4/5 overflow-y-auto animate-fade-in modal-content">
      <div class="flex justify-between items-center p-4 sm:p-6 border-gray-200 border-b modal-header">
        <h3 class="m-0 font-semibold text-indigo-600 text-xl">
          <i class="mr-2 fab fa-discord"></i>
          <span data-i18n="discordCommunityTitle">加入我们的 Discord 社区</span>
        </h3>
        <span
          class="bg-transparent p-0 border-0 font-bold text-gray-400 hover:text-indigo-600 text-3xl leading-none transition-colors duration-300 cursor-pointer close">&times;</span>
      </div>
      <div class="p-4 sm:p-6 modal-body">
        <div class="text-center">
          <p class="mb-6 text-gray-600" data-i18n="discordCommunityDesc">
            与其他玩家交流讨论，获取最新资讯，分享游戏心得
          </p>
          <div class="flex justify-center">
            <div class="shadow-lg rounded-lg overflow-hidden">
              <iframe src="https://discord.com/widget?id=1242365489817194512&theme=dark" width="320" height="400"
                allowtransparency="true" frameborder="0" title="Discord 社区卡片"
                sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"
                class="border-0 rounded-lg">
              </iframe>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./main.js"></script>
</body>

</html>
